#!/usr/bin/bash
#
# https://www.gnu.org/software/automake/manual/html_node/Use-TAP-with-the-Automake-test-harness.html#Use-TAP-with-the-Automake-test-harness
# 
tap_reply() {
  MSG=$1
  shift 1
  eval $@
  rc=$?
  echo ""
  if [[ $rc == 0 ]];
  then
      echo "ok $MSG";
  else
      echo "not ok $MSG";
  fi
}

echo 1..4
tap_reply "1 - passes pyflakes" "find . -name \*.py | xargs pyflakes"
tap_reply "2 - passes pep8" "find . -name \*.py | xargs pep8 -v"
tap_reply "3 - passes pylint # TODO" "find . -name \*.py | xargs pylint"
tap_reply "4 - passes doctests" "find . -name \*.py | xargs -n 1 python -m doctest"
